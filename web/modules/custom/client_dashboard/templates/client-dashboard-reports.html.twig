{#
/**
 * @file
 * Reports page template for client dashboard.
 *
 * Available variables:
 * - client_name: The name of the client.
 * - report_statuses: Array of report statuses.
 */
#}
<div class="webform-client-dashboard webform-client-reports">
	{# <div class="dashboard-header">
		{% if client_name %}
			<p class="dashboard-subtitle">{{ client_name }}</p>
		{% endif %}
	</div> #}

	{# Show report section if there are any reports #}
	{% if report_statuses is not empty %}
		<div class="report-section dashboard-section dashboard-results">
			<p class="report-intro">{{ 'Based on your profile and responses, here are your personalized analysis reports.'|t }}</p>

			<ol class="analysis-reports results-list">
				{% for type, report_info in report_statuses %}
					<li class="results-list__item report-{{ type }} report-status-{{ report_info.status }} {% if report_info.status == 'ready' and not report_info.viewed %}report-unviewed{% endif %}">
						{% if report_info.status == 'disabled' %}
							{% if report_info.image_url %}
								<div class="results-list__image">
									<img src="{{ report_info.image_url }}" alt="{{ report_info.title }}">
								</div>
							{% else %}
								<div class="results-list__image"></div>
							{% endif %}
							<div class="results-list__content results-list__content--disabled">
								<h3>
									{{ report_info.title }}
								</h3>
								<p>{{ report_info.description }}</p>
								<span class="results-list__status-text">{{ 'Complete more profile sections to unlock this report'|t }}</span>
							</div>
						{% elseif report_info.status == 'queued' %}
							{% if report_info.image_url %}
								<div class="results-list__image">
									<img src="{{ report_info.image_url }}" alt="{{ report_info.title }}">
								</div>
							{% else %}
								<div class="results-list__image"></div>
							{% endif %}
							<div class="results-list__content results-list__content--disabled">
								<h3>
									{{ report_info.title }}
								</h3>
								<p>{{ report_info.description }}</p>
								<span class="results-list__status-text">{{ 'This report is queued for generation, please wait'|t }}</span>
							</div>
						{% elseif report_info.status == 'processing' %}
							{% if report_info.image_url %}
								<div class="results-list__image">
									<img src="{{ report_info.image_url }}" alt="{{ report_info.title }}">
								</div>
							{% else %}
								<div class="results-list__image"></div>
							{% endif %}
							<div class="results-list__content results-list__content--disabled">
								<h3>
									{{ report_info.title }}
								</h3>
								<p>{{ report_info.description }}</p>
								<span class="results-list__status-text">{{ 'This report is being generated, please wait'|t }}</span>
							</div>
						{% elseif report_info.status == 'locked' %}
							{% if report_info.image_url %}
								<div class="results-list__image">
									<img src="{{ report_info.image_url }}" alt="{{ report_info.title }}">
								</div>
							{% else %}
								<div class="results-list__image"></div>
							{% endif %}
							<div class="results-list__content results-list__content--disabled">
								<h3>
									{{ report_info.title }}
								</h3>
								<p>{{ report_info.description }}</p>
								<span class="results-list__status-text">{{ 'Complete all sections to unlock'|t }}</span>
							</div>
						{% elseif report_info.status == 'not_generated' %}
							<a href="{{ report_info.url }}" class="results-list__link" aria-label="Generate the {{ report_info.title }} report">
								{% if report_info.image_url %}
									<div class="results-list__image">
										<img src="{{ report_info.image_url }}" alt="{{ report_info.title }}">
									</div>
								{% else %}
									<div class="results-list__image"></div>
								{% endif %}
								<div class="results-list__content">
									<h3>
										{{ report_info.title }}
									</h3>
									<p>{{ report_info.description }}</p>
									<span class="results-list__status-text">{{ 'Click to view your report'|t }}</span>
								</div>
							</a>
						{% elseif report_info.status == 'ready' %}
							<a href="{{ report_info.url }}" class="results-list__link" aria-label="Read the {{ report_info.title }} report">
								{% if report_info.image_url %}
									<div class="results-list__image">
										<img src="{{ report_info.image_url }}" alt="{{ report_info.title }}">
									</div>
								{% else %}
									<div class="results-list__image"></div>
								{% endif %}
								<div class="results-list__content">
									<h3>
										{{ report_info.title }}
									</h3>
									<p>{{ report_info.description }}</p>
									{% if not report_info.viewed %}
										<span class="results-list__status-text">{{ 'New report ready to view'|t }}</span>
									{% endif %}
								</div>
							</a>
						{% else %}
							<a href="{{ report_info.url }}" class="results-list__link" aria-label="View the {{ report_info.title }} report">
								{% if report_info.image_url %}
									<div class="results-list__image">
										<img src="{{ report_info.image_url }}" alt="{{ report_info.title }}">
									</div>
								{% else %}
									<div class="results-list__image"></div>
								{% endif %}
								<div class="results-list__content">
									<h3>
										{{ report_info.title }}
									</h3>
									<p>{{ report_info.description }}</p>
								</div>
							</a>
						{% endif %}
					</li>
				{% endfor %}
			</ol>

		</div>
	{% else %}
		<div class="dashboard-section">
			<p>{{ 'No reports are available yet. Complete your profile sections to generate personalized reports.'|t }}</p>
		</div>
	{% endif %}
</div>
