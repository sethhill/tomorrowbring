services:
  logger.channel.ai_report_storage:
    parent: logger.channel_base
    arguments: ['ai_report_storage']

  ai_report_storage.manager:
    class: Drupal\ai_report_storage\AiReportManager
    arguments:
      - '@entity_type.manager'
      - '@current_user'
      - '@logger.factory'
      - '@module_handler'

  ai_report_storage.extended_timeout_http_client:
    class: Drupal\ai_report_storage\Http\ExtendedTimeoutHttpClient
    public: false

  ai_report_storage.http_client_discovery_subscriber:
    class: Drupal\ai_report_storage\EventSubscriber\HttpClientDiscoverySubscriber
    arguments:
      - '@config.factory'
    tags:
      - { name: event_subscriber }

  ai_report_storage.commands:
    class: Drupal\ai_report_storage\Commands\AiReportStorageCommands
    arguments:
      - '@queue'
      - '@plugin.manager.queue_worker'
      - '@logger.channel.ai_report_storage'
    tags:
      - { name: drush.command }
