{#
/**
 * @file
 * Template for AI Skills Analysis Report.
 *
 * Available variables:
 * - report: Complete skills analysis report data
 */
#}

<div
	class="ai-skills-analysis-report">

	{# Pending state - shown while report is being generated #}
	{% if report.status == 'pending' %}
		{% include '@ai_report_storage/report-pending.html.twig' with {
			'report': report,
			'report_title': 'Generating Your Skills Analysis'|t
		} %}
	{% else %}

		{# Report header with image #}
		{% if report_image_url %}
			<div class="report-header">
				<img src="{{ report_image_url }}" alt="{{ 'Skills Analysis'|t }}" class="report-header__image">
			</div>
		{% endif %}

		{# Skill Trajectory Section #}
		{% if report.skill_trajectory %}
			<section class="report-section skill-trajectory">
				<h2>{{ 'Your Skill Trajectory'|t }}</h2>

				{% if report.skill_trajectory.current_strengths %}
					<div class="current-strengths">
						<p class="report-intro">{{ report.skill_trajectory.current_strengths }}</p>

					{% endif %}
				</div>
			{% endif %}

			<div class="report-lists">
				{% if report.skill_trajectory.critical_gaps %}

					<div class="critical-gaps report-list">
						<h3>{{ 'Critical Skill Gaps'|t }}</h3>
						<ul class="gap-list">
							{% for gap in report.skill_trajectory.critical_gaps %}
								<li class="gap-item difficulty-{{ gap.acquisition_difficulty }}">
									<h4>{{ gap.skill }}</h4>
									<div class="difficulty-badge">{{ gap.acquisition_difficulty|capitalize }}
										{{ 'to learn'|t }}</div>

									<p class="critical">
										<strong>{{ 'Why It’s Critical:'|t }}</strong>
										{{ gap.why_critical }}</p>
									<p class="impact">
										<strong>{{ 'Without This:'|t }}</strong>
										{{ gap.impact_without }}</p>
								</li>
							{% endfor %}
						</ul>
					</div>
				{% endif %}

				{% if report.skill_trajectory.emerging_opportunities %}
					<div class="emerging-opportunities report-list">
						<h3>{{ 'Emerging Opportunities'|t }}</h3>
						<ul>
							{% for opportunity in report.skill_trajectory.emerging_opportunities %}
								<li>
									<h4>{{ opportunity.skill }}</h4>
									<div class="opportunity-relevance">{{ opportunity.time_to_relevance }}</div>
									<p>
										{{ opportunity.why_emerging }}
									</p>
								</li>
							{% endfor %}
						</ul>
					</div>
				{% endif %}
			</div>
		</section>
	{% endif %}

	{# Skill Synergies #}
	{% if report.skill_synergies %}
		<section class="report-section skill-synergies">
			<h2>{{ 'Skill Synergies & Multipliers'|t }}</h2>
			{% if report.skill_synergies.introduction %}
				<p class="report-intro">{{ report.skill_synergies.introduction }}</p>
			{% endif %}

			<div class="report-lists">

				{% if report.skill_synergies.powerful_combinations %}
					<div class="combinations report-list">
						<h3>{{ 'Powerful Skill Combinations'|t }}</h3>
						<ul>
							{% for combo in report.skill_synergies.powerful_combinations %}
								<li>
									<h4>
										{% for  skill in combo.skills %}
											{{ skill }}
											{% if not loop.last %}
												<span>+</span>
											{% endif %}
										{% endfor %}
									</h4>
									<p>
										<strong>{{ 'Why It’s Powerful:'|t }}</strong>
										{{ combo.why_powerful }}</p>
									<p>
										<strong>{{ 'Application:'|t }}</strong>
										{{ combo.application }}</p>
								</li>
							{% endfor %}
						</ul>
					</div>
				{% endif %}

				{% if report.skill_synergies.ai_augmentation_opportunities %}
					<div class="ai-augmentation report-list">
						<h3>{{ 'AI Augmentation Opportunities'|t }}</h3>
						<ul>
							{% for aug in report.skill_synergies.ai_augmentation_opportunities %}
								<li>
									<h4>{{ aug.current_skill }}
										<span>×</span>
										{{ aug.ai_tool }}</h4>
									<p>{{ aug.multiplier_effect }}</p>
								</li>
							{% endfor %}
						</ul>

					</div>
				{% endif %}
			</div>
		</section>
	{% endif %}

	{# AI Advantage #}
	{% if report.ai_advantage %}
		<section class="report-section ai-advantage">
			<h2>{{ 'AI Advantage'|t }}</h2>
			<p class="report-intro">{{ report.ai_advantage.how_ai_helps }}</p>
			<div class="report-lists ai-skills-needed-list">
				<div class="report-list">
					<h3>{{ 'AI Skills Needed'|t }}</h3>
					<ul>
						{% for skill in report.ai_advantage.ai_skills_needed %}
							<li>{{ skill }}</li>
						{% endfor %}
					</ul>
				</div>
			</div>
		</section>
	{% endif %}

	{# Closing Message Section #}
	{% if report.closing_message %}
		<section class="report-section report-favorable">
			<h2>{{ report.closing_message.title|t }}</h2>
			<div class="highlight-card">
				<h3>{{ report.closing_message.message }}</h3>
			</div>
		</section>
	{% endif %}

	{# AI Generation Footer #}
	{% if report.model_used and report.generated_at %}
		<div class="report-footer ai-attribution">
			<p class="ai-generation-info">
				{{ 'This report was generated by AI using'|t }} {{ report.model_used }}{{ ' on '|t }}{{ report.generated_at|date('j F Y \\a\\t g:ia') }}.
			</p>
		</div>
	{% endif %}

	{# Actions #}
	<div class="report-footer">
		<div class="report-actions">
			<a href="/dashboard" class="button button--return">{{ 'Home'|t }}</a>
			<a href="/analysis/task-recommendations" class="button button--next">{{ 'Automating Tasks'|t }}</a>
		</div>
	</div>


</div>
