{# AI Career Transitions Report #}
<div
	class="career-transitions-report">

	{# Pending state - shown while report is being generated #}
	{% if report.status == 'pending' %}
		{% include '@ai_report_storage/report-pending.html.twig' with {
			'report': report,
			'report_title': 'Generating Your Career Opportunities'|t
		} %}
	{% else %}

		{% if report.transition_readiness %}
			<section class="report-section readiness">
				<h2>{{ 'Transition Readiness'|t }}</h2>
				<div class="gauge-wrapper">
					{% set readiness_class = report.transition_readiness.overall_score|number_format(0) >= 70  ? 'gauge-risk-low' : (report.transition_readiness.overall_score|number_format(0) >= 40 ? 'gauge-risk-medium' : 'gauge-risk-high') %}
					<div class="gauge gauge-large {{ readiness_class }}" data-score="{{ report.transition_readiness.overall_score|number_format(0) }}" style="--score: {{ report.transition_readiness.overall_score|number_format(0) }}">

					{% endif %}
					<div class="gauge-fill"></div>
					<div class="gauge-inner">
						<span class="gauge-value">{{ report.transition_readiness.overall_score|number_format(0) }}</span>
						<span class="gauge-max">/100</span>
					</div>
				</div>
				<div class="gauge-label">{{ 'Readiness Score'|t }}</div>
			</div>
			<p class="report-intro">{{ report.transition_readiness.summary }}</p>
			<div class="report-lists transition-readiness-list">
				<div class="report-list">
					<h3>{{ 'Strengths'|t }}</h3>
					<ul>
						{% for strength in report.transition_readiness.key_strengths %}
							<li>{{ strength }}</li>
						{% endfor %}
					</ul>
				</div>
				<div class="report-list">
					<h3>{{ 'Gaps'|t }}</h3>
					<ul>
						{% for gap in report.transition_readiness.key_gaps %}
							<li>{{ gap }}</li>
						{% endfor %}
					</ul>
				</div>
			</div>
		</section>
	{% endif %}

	{% if report.viable_transitions %}
		<section class="report-section transitions">
			<h2>{{ 'Potential Career Transitions'|t }}</h2>
			<div class="transition-cards">
				{% for transition in report.viable_transitions %}
					<div class="card-small transition-card">
						<div class="card-header">
							<h3>{{ transition.target_role }}</h3>
							<div class="rating-container">
								<div class="circle-rating">
									{% set score = transition.fit_score|number_format(0) %}
									{% for i in 1..5 %}
										{% if score >= i * 2 %}
											<span class="circle circle-full"></span>
										{% elseif score >= (i * 2 - 1) %}
											<span class="circle circle-half"></span>
										{% else %}
											<span class="circle circle-empty"></span>
										{% endif %}
									{% endfor %}
								</div>
								<div class="rating-label">{{ 'Skill Match'|t }}</div>
							</div>
						</div>
						<p>{{ transition.why_viable }}</p>
						<h4>{{ 'Transferable Skills'|t }}</h4>
						<ul>
							{% for skill in transition.transferable_skills %}
								<li>{{ skill }}</li>
							{% endfor %}
						</ul>
						<h4>{{ 'Skills to Acquire'|t }}</h4>
						<ul>
							{% for skill in transition.skills_to_acquire %}
								<li>{{ skill.skill }}
									<!--({{ skill.time_to_learn }})-->
								</li>
							{% endfor %}
						</ul>
						<h4>{{ 'Timeline'|t }}</h4>
						<p>{{ transition.timeline }}</p>
						<div class="first-steps">
							<h4>{{ 'First Steps'|t }}</h4>
							<ul>
								{% for step in transition.first_steps %}
									<li>{{ step }}</li>
								{% endfor %}
							</ul>
						</div>
					</div>
				{% endfor %}
			</div>
		</section>
	{% endif %}

	{# Closing Message Section #}
	{% if report.closing_message %}
		<section class="report-section report-favorable">
			<h2>{{ report.closing_message.title|t }}</h2>
			<div class="highlight-card">
				<h3>{{ report.closing_message.message }}</h3>
			</div>
		</section>
	{% endif %}

	{# AI Generation Footer #}
	{% if report.model_used and report.generated_at %}
		<div class="report-footer ai-attribution">
			<p class="ai-generation-info">
				{{ 'This report was generated by AI using'|t }} {{ report.model_used }}{{ ' on '|t }}{{ report.generated_at|date('j F Y \\a\\t g:ia') }}.
			</p>
		</div>
	{% endif %}

	<div class="report-footer">
		<a href="/dashboard" class="button button--return">{{ 'Home'|t }}</a>
		<a href="/analysis/learning-resources" class="button button--next">{{ 'Learning Resources'|t }}</a>
	</div>


</div>
